<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-179962442-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-179962442-1",{anonymize_ip:!0})</script><title data-react-helmet="true">AwsGettingStartedFromExamples | GruCloud</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="AwsGettingStartedFromExamples | GruCloud"><meta data-react-helmet="true" name="description" content="This tutorial explains the deployment automation of a simple AWS EC2 instance with the GruCloud AWS provider."><meta data-react-helmet="true" property="og:description" content="This tutorial explains the deployment automation of a simple AWS EC2 instance with the GruCloud AWS provider."><link data-react-helmet="true" rel="shortcut icon" href="/img/cloud.svg"><link data-react-helmet="true" rel="canonical" href="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples"><link data-react-helmet="true" rel="alternate" href="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://grucloud.github.io//docs/aws/AwsGettingStartedFromExamples" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8f7d6cb1.css">
<link rel="preload" href="/assets/js/runtime~main.04f4acbe.js" as="script">
<link rel="preload" href="/assets/js/main.2d113175.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/cloud.svg" alt="GruCloud Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/cloud.svg" alt="GruCloud Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">GruCloud</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/grucloud/grucloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AwsGettingStartedFromExamples</h1></header><p>This tutorial explains the deployment automation of a simple <a href="https://aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">AWS EC2 instance</a> with the <a href="https://www.npmjs.com/package/@grucloud/provider-aws" target="_blank" rel="noopener noreferrer">GruCloud AWS provider</a>.</p><p>Instead of manually creating, updating, and destroying EC2 instances, the infrastructure will be described as Javascript code. The GruCloud CLI then reads this code, retrieves the lives resources through the AWS API, and decides what needs to be created, updated, or destroyed.</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/examples/aws/ec2-simple/artifacts/diagram-target.svg" alt="graph-diagram-ec2.svg"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="requirements">Requirements<a aria-hidden="true" class="hash-link" href="#requirements" title="Direct link to heading">​</a></h2><p>The following chart explains the AWS requirements:</p><ul><li>AWS Account</li><li>AWS CLI</li><li>Access and Secret Key</li><li>Configure the AWS CLI</li></ul><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/aws-requirements.svg" alt="AWS Requirements"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="aws-account">AWS Account<a aria-hidden="true" class="hash-link" href="#aws-account" title="Direct link to heading">​</a></h3><p>Ensure access to the <a href="https://console.aws.amazon.com" target="_blank" rel="noopener noreferrer">Amazon Console</a> and create an account if necessary.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="aws-cli">AWS CLI<a aria-hidden="true" class="hash-link" href="#aws-cli" title="Direct link to heading">​</a></h3><p>Ensure the <em>AWS CLI</em> is installed and configured:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws --version</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If not, visit <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="access-and-secret-key">Access and Secret Key<a aria-hidden="true" class="hash-link" href="#access-and-secret-key" title="Direct link to heading">​</a></h3><p>Visit the <a href="https://console.aws.amazon.com/iam/home#/security_credentials" target="_blank" rel="noopener noreferrer">security credentials</a></p><ul><li>Click on <strong>Access key (access key ID and secret access key).</strong></li><li>Click on the button <strong>Create New Access Key</strong>.</li></ul><p>Write down the <strong>AWSAccessKeyId</strong> and <strong>AWSSecretKey</strong></p><blockquote><p>In a further episode, the access and secret key will be obtained from a dedicated IAM user with the correct role and policy.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="configure-aws-cli">Configure AWS CLI<a aria-hidden="true" class="hash-link" href="#configure-aws-cli" title="Direct link to heading">​</a></h3><p>Configure the account with the previously obtained <strong>AWSAccessKeyId</strong> and <strong>AWSSecretKey</strong>, as well as the region, for instance <code>us-east-1</code></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws configure</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="getting-the-grucloud-cli">Getting the GruCloud CLI<a aria-hidden="true" class="hash-link" href="#getting-the-grucloud-cli" title="Direct link to heading">​</a></h3><p>This chart describes the way to install <strong>gc</strong>, the GruCloud CLI:</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/grucloud-cli-install.svg" alt="gc-cli-install"></p><p>GruCloud is written in Javascript running on <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a>. Check if <code>node</code> is present on your system</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">node --version</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>The version must be greater than 14</p></blockquote><p>Install the <em>GrucCloud</em> command-line utility <strong>gc</strong> with <em>npm</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm i -g @grucloud/core</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Check the current version of <strong>gc</strong>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc --version</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="code-architecture">Code Architecture<a aria-hidden="true" class="hash-link" href="#code-architecture" title="Direct link to heading">​</a></h2><p>In this section, we&#x27;ll create the files needed to describe an infrastructure with GruCloud:</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/grucloud-project-files.svg" alt="grucloud-files"></p><ul><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/resources.js" target="_blank" rel="noopener noreferrer">resources.js</a>: creates the resources given a provider.</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/iac.js" target="_blank" rel="noopener noreferrer">iac.js</a>: exports <em>createStack</em> with provider and resources associated</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/config.js" target="_blank" rel="noopener noreferrer">config.js</a>: the config function.</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/package.json" target="_blank" rel="noopener noreferrer">package.json</a>: specifies the npm dependencies and other information.</p></li><li><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/hook.js" target="_blank" rel="noopener noreferrer">hooks.js</a>: optionally provides hook functions called after deployment or destruction.</p></li></ul><blockquote><p>The <a href="https://github.com/grucloud/grucloud/tree/main/examples/aws/ec2/ec2-simple" target="_blank" rel="noopener noreferrer">source code</a> for this example in on GitHub.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-a-new-project">Create a new project<a aria-hidden="true" class="hash-link" href="#create-a-new-project" title="Direct link to heading">​</a></h3><p>Create a new directory, for instance <code>ec2-example</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir ec2-example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd ec2-example</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="packagejson">package.json<a aria-hidden="true" class="hash-link" href="#packagejson" title="Direct link to heading">​</a></h3><p>Let&#x27;s create a new <code>package.json</code> with the <code>npm init</code> command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s install the GruCloud AWS provider called <a href="https://www.npmjs.com/package/@grucloud/provider-aws" target="_blank" rel="noopener noreferrer">@grucloud/provider-aws</a>, as well as the GruCloud core library <code>@grucloud/core</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm install @grucloud/core @grucloud/provider-aws</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="configjs">config.js<a aria-hidden="true" class="hash-link" href="#configjs" title="Direct link to heading">​</a></h3><p>The configuration is a Javascript function located in <a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/config.js" target="_blank" rel="noopener noreferrer">config.js</a></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> pkg </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./package.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> stage </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  projectName</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> pkg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>### resources.js</p><p>This file exports the <em>createResources</em> functions</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">createResources</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Instance&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    group</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;EC2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;web-server-ec2-example&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">properties</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> config </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token maybe-class-name">InstanceType</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;t2.micro&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token maybe-class-name">ImageId</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ami-02e136e904f3da870&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token maybe-class-name">Placement</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token maybe-class-name">AvailabilityZone</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">config</span><span class="token template-string interpolation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token template-string interpolation">region</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)">a</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="iacjs">iac.js<a aria-hidden="true" class="hash-link" href="#iacjs" title="Direct link to heading">​</a></h3><p>Create a file called <code>iac.js</code> which stands for <em>infrastructure as code</em>.
We&#x27;ll first import <em>AwsProvider</em> from <a href="https://www.npmjs.com/package/@grucloud/provider-aws" target="_blank" rel="noopener noreferrer">@grucloud/provider-aws</a></p><p><a href="https://github.com/grucloud/grucloud/blob/main/examples/aws/ec2/ec2-simple/iac.js" target="_blank" rel="noopener noreferrer">iac.js</a> must export the <code>createStack</code> function which returns the provider and the resources.</p><p>Then, instantiate <em>AwsProvider</em> by providing the <em>config</em> function.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// iac.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token maybe-class-name">AwsProvider</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@grucloud/provider-aws&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> createResources </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./resources&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">createStack</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> createProvider </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  provider</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createProvider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">AwsProvider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    createResources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    config</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./config&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hooks</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./hook&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="grucloud-workflow">GruCloud Workflow<a aria-hidden="true" class="hash-link" href="#grucloud-workflow" title="Direct link to heading">​</a></h2><p>This chart depicts the workflow with the main <strong>gc</strong> commands:</p><ul><li>gc info</li><li>gc graph</li><li>gc apply</li><li>gc list</li><li>gc destroy</li></ul><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/docusaurus/plantuml/grucloud-cli-commands.svg" alt="grucloud commands"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="info">Info<a aria-hidden="true" class="hash-link" href="#info" title="Direct link to heading">​</a></h3><p>As a way to verify that <strong>gc</strong> can connect to the AWS API, one can use the <code>info</code> command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc info</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI txt"><pre tabindex="0" class="prism-code language-txt codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - provider:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      type: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    accountId: 840541460064</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    zone: eu-west-2a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    config:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      projectName: ec2-simple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ec2Instance:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name: web-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        properties:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          InstanceType: t2.micro</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          ImageId: ami-00f6a0c18edb19300</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      stage: dev</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      region: eu-west-2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc info&quot; executed in 1s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="deploy">Deploy<a aria-hidden="true" class="hash-link" href="#deploy" title="Direct link to heading">​</a></h3><p>We are ready to deploy with <code>apply</code> command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc apply</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Querying resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 6/6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Querying</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌──────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ 1 EC2 from aws                                                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┬──────────┬──────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Name       │ Action   │ Data                                             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┼──────────┼──────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ web-server │ CREATE   │ InstanceType: t2.micro                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ ImageId: ami-00f6a0c18edb19300                   │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ MaxCount: 1                                      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ MinCount: 1                                      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ TagSpecifications:                               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │   - ResourceType: instance                       │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │     Tags:                                        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: Name                                │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: web-server                        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: ManagedBy                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: GruCloud                          │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: CreatedByProvider                   │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: aws                               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: stage                               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: dev                               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │       - Key: projectName                         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │         Value: ec2-simple                        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │                                                  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────┴──────────┴──────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Plan summary for provider aws                                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├─────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ DEPLOY RESOURCES                                                        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────────────┬────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ EC2                │ web-server                                         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────────────┴────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">? Are you sure to deploy 1 resource, 1 type on 1 provider? › (y/N)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>At this point, you are allowed to look at what is going to be deployed.
Type <code>y</code> to accept:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Deploying resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Deploying</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource deployed of 1 type and 1 provider</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Running OnDeployedGlobal resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc a&quot; executed in 1m 29s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When <code>gc apply</code> is executed a second time, resources should not be created or destroyed.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc a</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI txt"><pre tabindex="0" class="prism-code language-txt codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Querying resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 13/13</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Querying</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Plan summary for provider aws                                                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└─────────────────────────────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Nothing to deploy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Running OnDeployedGlobal resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc a&quot; executed in 9s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>As expected, nothing to deploy, the target resources defined in the code match the live resources.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="list">List<a aria-hidden="true" class="hash-link" href="#list" title="Direct link to heading">​</a></h3><p>To list all the resources, and generate a diagram:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc list --graph --all</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will include the default AWS resources such as VPC, subnet, internet gateway, and security group.</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/examples/aws/ec2/ec2-simple/artifacts/diagram-live.svg" alt="graph-live"></p><p>To list only the resources created by GruCloud:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc list --our</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI txt"><pre tabindex="0" class="prism-code language-txt codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Listing resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 13/13</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ 1 EC2 from aws                                                                                          │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┬─────────────────────────────────────────────────────────────────────────────────────┬──────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Name       │ Data                                                                                │ Our  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┼─────────────────────────────────────────────────────────────────────────────────────┼──────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ web-server │ AmiLaunchIndex: 0                                                                   │ Yes  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ImageId: ami-00f6a0c18edb19300                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ InstanceId: i-016628a1b6a6a2f91                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ InstanceType: t3.micro                                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ LaunchTime: 2021-04-29T23:10:44.000Z                                                │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Monitoring:                                                                         │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   State: disabled                                                                   │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Placement:                                                                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   AvailabilityZone: eu-west-2a                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   GroupName:                                                                        │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Tenancy: default                                                                  │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PrivateDnsName: ip-172-31-2-146.eu-west-2.compute.internal                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PrivateIpAddress: 172.31.2.146                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ProductCodes: []                                                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PublicDnsName: ec2-18-132-98-216.eu-west-2.compute.amazonaws.com                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ PublicIpAddress: 18.132.98.216                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ State:                                                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Code: 16                                                                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Name: running                                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ StateTransitionReason:                                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ SubnetId: subnet-0f6f085fc384bf8ce                                                  │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ VpcId: vpc-bbbafcd3                                                                 │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Architecture: x86_64                                                                │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ BlockDeviceMappings:                                                                │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - DeviceName: /dev/sda1                                                           │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Ebs:                                                                            │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       AttachTime: 2021-04-29T23:10:45.000Z                                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       DeleteOnTermination: true                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       Status: attached                                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       VolumeId: vol-0a88a34248fe18740                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ClientToken: 7ef5fd60-e962-400f-a2b9-37719d8329ed                                   │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ EbsOptimized: false                                                                 │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ EnaSupport: true                                                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Hypervisor: xen                                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ElasticGpuAssociations: []                                                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ ElasticInferenceAcceleratorAssociations: []                                         │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ NetworkInterfaces:                                                                  │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Association:                                                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       IpOwnerId: amazon                                                             │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       PublicDnsName: ec2-18-132-98-216.eu-west-2.compute.amazonaws.com              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       PublicIp: 18.132.98.216                                                       │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Attachment:                                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       AttachTime: 2021-04-29T23:10:44.000Z                                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       AttachmentId: eni-attach-02744addcff43ecbb                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       DeleteOnTermination: true                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       DeviceIndex: 0                                                                │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       Status: attached                                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       NetworkCardIndex: 0                                                           │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Description:                                                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Groups:                                                                         │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       - GroupName: default                                                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         GroupId: sg-f4139a96                                                        │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Ipv6Addresses: []                                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     MacAddress: 06:ee:ef:d7:1c:48                                                   │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     NetworkInterfaceId: eni-06e9d87ff776cf40f                                       │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     OwnerId: 840541460064                                                           │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     PrivateDnsName: ip-172-31-2-146.eu-west-2.compute.internal                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     PrivateIpAddress: 172.31.2.146                                                  │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     PrivateIpAddresses:                                                             │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │       - Association:                                                                │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │           IpOwnerId: amazon                                                         │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │           PublicDnsName: ec2-18-132-98-216.eu-west-2.compute.amazonaws.com          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │           PublicIp: 18.132.98.216                                                   │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         Primary: true                                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         PrivateDnsName: ip-172-31-2-146.eu-west-2.compute.internal                  │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │         PrivateIpAddress: 172.31.2.146                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     SourceDestCheck: true                                                           │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Status: in-use                                                                  │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     SubnetId: subnet-0f6f085fc384bf8ce                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     VpcId: vpc-bbbafcd3                                                             │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     InterfaceType: interface                                                        │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ RootDeviceName: /dev/sda1                                                           │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ RootDeviceType: ebs                                                                 │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ SecurityGroups:                                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - GroupName: default                                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     GroupId: sg-f4139a96                                                            │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ SourceDestCheck: true                                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Tags:                                                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: Name                                                                       │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: web-server                                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: stage                                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: dev                                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: CreatedByProvider                                                          │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: aws                                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: ManagedBy                                                                  │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: GruCloud                                                                 │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   - Key: projectName                                                                │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │     Value: ec2-simple                                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ VirtualizationType: hvm                                                             │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ CpuOptions:                                                                         │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   CoreCount: 1                                                                      │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   ThreadsPerCore: 2                                                                 │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ CapacityReservationSpecification:                                                   │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   CapacityReservationPreference: open                                               │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ HibernationOptions:                                                                 │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Configured: false                                                                 │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ Licenses: []                                                                        │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ MetadataOptions:                                                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   State: applied                                                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   HttpTokens: optional                                                              │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   HttpPutResponseHopLimit: 1                                                        │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   HttpEndpoint: enabled                                                             │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │ EnclaveOptions:                                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │   Enabled: false                                                                    │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │                                                                                     │      │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────┴─────────────────────────────────────────────────────────────────────────────────────┴──────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List Summary:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌────────────────────────────────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ aws                                                                                                    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────────────┬───────────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ EC2                │ web-server                                                                        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────────────┴───────────────────────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource, 7 types, 1 provider</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc l -o&quot; executed in 7s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>Note that tags have been added to the EC2 Instance, it gives GruCloud a way to identify the resources under its control. Unlike other infrastructure as code tools such as Terraform and Pulumi, GruCloud does not need a <em>state</em> file. Hence removing a lot of complexity and issues.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="update">Update<a aria-hidden="true" class="hash-link" href="#update" title="Direct link to heading">​</a></h3><p>The ec2 instance configuration might change, for instance, let&#x27;s modify the machine type to <code>t3.micro</code> located in <em>config.js</em></p><p>The <code>plan</code> command is a read-only command which fetches the live resources and compares them with the target resources defined in the code.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc plan</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI txt"><pre tabindex="0" class="prism-code language-txt codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Querying resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 13/13</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Querying</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌──────────────────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ 1 EC2 from aws                                                                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┬──────────┬──────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Name       │ Action   │ Data                                                             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────┼──────────┼──────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ web-server │ UPDATE   │ added:                                                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │ updated:                                                         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │   InstanceType: t3.micro                                         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            │          │                                                                  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────┴──────────┴──────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ Plan summary for provider aws                                                           │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├─────────────────────────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ DEPLOY RESOURCES                                                                        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────────────────────┬────────────────────────────────────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ EC2                │ web-server                                                         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└────────────────────┴────────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource to deploy on 1 provider</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc plan&quot; executed in 5s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s apply the change:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc apply</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p>Bear in mind that the machine requires to be stopped and restarted.</p></blockquote><p>Trust but verify, hence, list the EC2 instances and check the <code>InstanceType</code> has been changed.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc l -t Instance</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="output">Output<a aria-hidden="true" class="hash-link" href="#output" title="Direct link to heading">​</a></h3><p>Another useful command is <em>gc output</em>, which extract information for a specific field of a given resource</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc output -t Instance --name web-server -f InstanceType</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI txt"><pre tabindex="0" class="prism-code language-txt codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">t3.micro</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Nested field can be accessed too, for example, let&#x27;s retrieve the public IP address attached to the EC2 instance:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc output -t Instance --name web-server -f &#x27;NetworkInterfaces[0].Association.PublicIp&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI txt"><pre tabindex="0" class="prism-code language-txt codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">18.130.34.212</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The temptation to ping is high:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ping `gc output -t Instance --name web-server -f &#x27;NetworkInterfaces[0].Association.PublicIp&#x27;`</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI txt"><pre tabindex="0" class="prism-code language-txt codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">PING 18.130.34.212 (18.130.34.212): 56 data bytes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">64 bytes from 18.130.34.212: icmp_seq=0 ttl=38 time=153.799 ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">64 bytes from 18.130.34.212: icmp_seq=1 ttl=38 time=153.583 ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">64 bytes from 18.130.34.212: icmp_seq=2 ttl=38 time=140.622 ms</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="destroy">Destroy<a aria-hidden="true" class="hash-link" href="#destroy" title="Direct link to heading">​</a></h3><p>Time to destroy the resources allocated and therefore save a lot of £$€.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc destroy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Find Deletable resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 6/6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">? Are you sure to destroy 1 resource, 1 type on 1 provider? › (y/N)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once again, you are allowed to look at what is going to be destroyed.
Type &#x27;y&#x27; to confirm the destruction:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Destroying resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Destroying</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ✓ EC2 1/1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1 resource destroyed, 1 type on 1 provider</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Running OnDestroyedGlobal resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc destroy&quot; executed in 1m 29s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s run the <code>gc list</code> command with the <code>Instance</code> filter to verify the I
ec2 instance is gone:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc l -t Instance</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Listing resources on 1 provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✓ aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Initialising</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ✓ Listing 6/6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">List Summary:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Provider: aws</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ aws                                                                     │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└─────────────────────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">0 resources, 0 types, 1 provider</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Command &quot;gc list -t Instance&quot; executed in 3s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This example demonstrates how to code a very basic infrastructure with one EC2 instance, and how can we use the <code>gc apply</code>, <code>gc list</code>, <code>gc destroy</code>, and <code>gc graph</code> to manage the infrastructure.</p><p>It paves the way for more <a href="https://www.grucloud.com/docs/aws/AwsExamples" target="_blank" rel="noopener noreferrer">AWS examples</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="graph">Graph<a aria-hidden="true" class="hash-link" href="#graph" title="Direct link to heading">​</a></h3><p>A picture is worth a thousand words, GruCloud generates an SVG file describing the resources and their relationship.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gc graph</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here is the graph of a typical web application managed by Kubernetes running on AWS where the master node is managed by EKS.</p><p><img src="https://raw.githubusercontent.com/grucloud/grucloud/main/examples/starhackit/eks-lean/artifacts/diagram-target.svg" alt="kubernetes eks"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a><ul><li><a href="#aws-account" class="table-of-contents__link toc-highlight">AWS Account</a></li><li><a href="#aws-cli" class="table-of-contents__link toc-highlight">AWS CLI</a></li><li><a href="#access-and-secret-key" class="table-of-contents__link toc-highlight">Access and Secret Key</a></li><li><a href="#configure-aws-cli" class="table-of-contents__link toc-highlight">Configure AWS CLI</a></li><li><a href="#getting-the-grucloud-cli" class="table-of-contents__link toc-highlight">Getting the GruCloud CLI</a></li></ul></li><li><a href="#code-architecture" class="table-of-contents__link toc-highlight">Code Architecture</a><ul><li><a href="#create-a-new-project" class="table-of-contents__link toc-highlight">Create a new project</a></li><li><a href="#packagejson" class="table-of-contents__link toc-highlight">package.json</a></li><li><a href="#configjs" class="table-of-contents__link toc-highlight">config.js</a></li><li><a href="#iacjs" class="table-of-contents__link toc-highlight">iac.js</a></li></ul></li><li><a href="#grucloud-workflow" class="table-of-contents__link toc-highlight">GruCloud Workflow</a><ul><li><a href="#info" class="table-of-contents__link toc-highlight">Info</a></li><li><a href="#deploy" class="table-of-contents__link toc-highlight">Deploy</a></li><li><a href="#list" class="table-of-contents__link toc-highlight">List</a></li><li><a href="#update" class="table-of-contents__link toc-highlight">Update</a></li><li><a href="#output" class="table-of-contents__link toc-highlight">Output</a></li><li><a href="#destroy" class="table-of-contents__link toc-highlight">Destroy</a></li><li><a href="#graph" class="table-of-contents__link toc-highlight">Graph</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div><style data-emotion="css 1dszc5b">.css-1dszc5b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}</style><div class="css-1dszc5b"><style data-emotion="css 1qkzzwm">.css-1qkzzwm{margin:20px;}</style><div class="css-1qkzzwm"><h4 class="footer__title">Community</h4><style data-emotion="css 1tzzd34">.css-1tzzd34{padding:0 30px 0 00px;list-style:none;}</style><ul class="css-1tzzd34"><li><a href="https://twitter.com/grucloud_iac" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li><a href="https://stackoverflow.com/questions/tagged/grucloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li><a href="https://discord.com/channels/803645280359546920/803645355606147082" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="css-1qkzzwm"><h4 class="footer__title">Documentation</h4><ul class="css-1tzzd34"><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/aws/AwsGettingStarted">AWS</a></li><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/google/GoogleGettingStarted">Google Cloud</a></li><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/azure/AzureGettingStarted">Microsoft Azure</a></li><li><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/k8s/K8sGettingStarted">Kubernetes</a></li></ul></div></div><style data-emotion="css gk60pb">.css-gk60pb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.css-gk60pb >div{padding-right:30px;}</style><div class="css-gk60pb"><div>Copyright © 2022 GruCloud</div><a href="https://www.freeprivacypolicy.com/live/ada70892-c887-4a1d-8d0e-29801fe215b2">Privacy Policy</a></div></div></footer></div>
<script src="/assets/js/runtime~main.04f4acbe.js"></script>
<script src="/assets/js/main.2d113175.js"></script>
</body>
</html>